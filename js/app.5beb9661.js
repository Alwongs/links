(function(e){function t(t){for(var r,a,o=t[0],i=t[1],u=t[2],l=0,d=[];l<o.length;l++)a=o[l],Object.prototype.hasOwnProperty.call(s,a)&&s[a]&&d.push(s[a][0]),s[a]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);p&&p(t);while(d.length)d.shift()();return c.push.apply(c,u||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],r=!0,a=1;a<n.length;a++){var o=n[a];0!==s[o]&&(r=!1)}r&&(c.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={app:0},s={app:0},c=[];function o(e){return i.p+"js/"+({}[e]||e)+"."+{"chunk-01807728":"f7a98b93","chunk-2d0a32ea":"6b33045e","chunk-38bab7bb":"721fbe36","chunk-3a671566":"503d74ec","chunk-83462736":"c2609f4c","chunk-d0ef0002":"fc5e6082"}[e]+".js"}function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],n={"chunk-01807728":1,"chunk-38bab7bb":1,"chunk-3a671566":1,"chunk-83462736":1,"chunk-d0ef0002":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-01807728":"7b90322d","chunk-2d0a32ea":"31d6cfe0","chunk-38bab7bb":"a39c5aa3","chunk-3a671566":"4ba6b7d1","chunk-83462736":"31a3ad85","chunk-d0ef0002":"74688169"}[e]+".css",s=i.p+r,c=document.getElementsByTagName("link"),o=0;o<c.length;o++){var u=c[o],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===r||l===s))return t()}var d=document.getElementsByTagName("style");for(o=0;o<d.length;o++){u=d[o],l=u.getAttribute("data-href");if(l===r||l===s)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var r=t&&t.target&&t.target.src||s,c=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");c.code="CSS_CHUNK_LOAD_FAILED",c.request=r,delete a[e],p.parentNode.removeChild(p),n(c)},p.href=s;var b=document.getElementsByTagName("head")[0];b.appendChild(p)})).then((function(){a[e]=0})));var r=s[e];if(0!==r)if(r)t.push(r[2]);else{var c=new Promise((function(t,n){r=s[e]=[t,n]}));t.push(r[2]=c);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,i.nc&&l.setAttribute("nonce",i.nc),l.src=o(e);var d=new Error;u=function(t){l.onerror=l.onload=null,clearTimeout(p);var n=s[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",d.name="ChunkLoadError",d.type=r,d.request=a,n[1](d)}s[e]=void 0}};var p=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/links/",i.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var p=l;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"18af":function(e,t,n){"use strict";n("83e0")},"2fc4":function(e,t,n){},3145:function(e,t,n){"use strict";n("b5fd")},"56d7":function(e,t,n){"use strict";n.r(t);var r=n("7a23");const a={class:"wrapper"};function s(e,t,n,s,c,o){const i=Object(r["y"])("app-panel"),u=Object(r["y"])("app-aside"),l=Object(r["y"])("router-view"),d=Object(r["y"])("app-footer");return Object(r["r"])(),Object(r["e"])(r["a"],null,[Object(r["h"])(i),Object(r["f"])("div",a,[Object(r["h"])(u,{class:"aside-block"}),Object(r["h"])(l)]),Object(r["h"])(d)],64)}const c={class:"app-panel"},o={class:"nav-list"},i=["onClick"];function u(e,t,n,a,s,u){const l=Object(r["y"])("router-link");return Object(r["r"])(),Object(r["e"])("div",c,[Object(r["f"])("div",{class:"panel-item home-link",onClick:t[0]||(t[0]=t=>e.$router.push({name:"home"}))}," Links "),Object(r["f"])("nav",{class:Object(r["n"])(["panel-item",{active:u.isAsideOpen}])},[Object(r["f"])("ul",o,[(Object(r["r"])(!0),Object(r["e"])(r["a"],null,Object(r["x"])(u.menuItems,e=>(Object(r["r"])(),Object(r["e"])("li",{key:e.route,class:"nav-item",onClick:t=>u.goTo(e.route)},[Object(r["h"])(l,{to:e.route},{default:Object(r["E"])(()=>[Object(r["g"])(Object(r["A"])(e.title),1)]),_:2},1032,["to"])],8,i))),128)),u.isUserAuthenticated?(Object(r["r"])(),Object(r["e"])("li",{key:0,class:"nav-item",onClick:t[1]||(t[1]=e=>u.logout())}," Выйти ")):Object(r["d"])("",!0)]),Object(r["f"])("div",{class:Object(r["n"])(["menu-btn",{opened:u.isAsideOpen}]),onClick:t[2]||(t[2]=(...e)=>u.toggleMenu&&u.toggleMenu(...e))},null,2)],2)])}var l={name:"AppPanel",computed:{isUserAuthenticated(){return this.$store.getters.isUserAuthenticated},isAsideOpen(){return this.$store.getters.isAsideOpen},menuItems(){return this.isUserAuthenticated?[{title:"Profile",route:"/profile-page"}]:[{title:"Вход",route:"/login"},{title:"Регистрация",route:"/register"}]}},data(){return{}},methods:{toggleMenu(){this.$store.commit("TOGGLE_ASIDE")},logout(){return confirm("Вы уверены?")?(this.$store.dispatch("logOut"),this.$router.push("/"),void(this.isMenuOpen=!1)):void 0},goTo(e){this.$router.push(e)}}},d=(n("e49b"),n("6b0d")),p=n.n(d);const b=p()(l,[["render",u],["__scopeId","data-v-1c6a97ee"]]);var h=b;function g(e,t,n,a,s,c){const o=Object(r["y"])("app-categories");return Object(r["r"])(),Object(r["e"])("aside",{class:Object(r["n"])(["app-aside",{active:c.isAsideOpen}])},[Object(r["h"])(o)],2)}var O=n("be7a"),f={components:{AppCategories:O["a"]},name:"AppAside",computed:{isAsideOpen(){return this.$store.getters.isAsideOpen}},async mounted(){await this.$store.dispatch("getCategoryList")}};n("99c6");const m=p()(f,[["render",g],["__scopeId","data-v-9f2e02fc"]]);var j=m;const y={class:"app-footer"};function A(e,t,n,a,s,c){return Object(r["r"])(),Object(r["e"])("div",y," footer 2022 ")}var E={};n("18af");const v=p()(E,[["render",A],["__scopeId","data-v-126d5021"]]);var _=v,k={name:"App",components:{AppPanel:h,AppAside:j,AppFooter:_}};n("3145");const T=p()(k,[["render",s],["__scopeId","data-v-c34fe282"]]);var L=T,S=n("6605"),C=n("5502"),I=n("260b"),w=n("ea7b");const R={apiKey:"AIzaSyAT7RwpqqGClcHkBL91x9cf7J2iEeCh43w",authDomain:"useful-link-list.firebaseapp.com",projectId:"useful-link-list",storageBucket:"useful-link-list.appspot.com",messagingSenderId:"1085471896639",appId:"1:1085471896639:web:2431325325cd64bf5d748a"},N=Object(I["a"])(R),D=Object(w["b"])(N);var G={getters:{isUserAuthenticated(e){return e.user.isAuthenticated},userId(e){return e.user.uid}},state:{user:{isAuthenticated:!1,uid:null},unsubscribeAuth:null},mutations:{SET_USER(e,t){e.user.isAuthenticated=!0,e.user.uid=t},UNSET_USER(e){e.user={isAuthenticated:!1,uid:null}},SET_UNSUBSCRIBE_AUTH(e,t){e.unsubscribeAuth=t}},actions:{initAuth({dispatch:e,commit:t,state:n}){return new Promise(r=>{n.unsubscribeAuth&&n.unsubscribeAuth();let a=Object(w["c"])(D,t=>{e("stateChanged",t),r(t)});t("SET_UNSUBSCRIBE_AUTH",a)})},async register({commit:e},{email:t,password:n}){e("SET_LOADING",!0),e("CLEAR_ERROR");try{await Object(w["a"])(D,t,n),e("SET_LOADING",!1)}catch(r){e("SET_LOADING",!1),e("SET_ERROR",r.message)}},async login({commit:e},{email:t,password:n}){e("SET_LOADING",!0),e("CLEAR_ERROR");try{await Object(w["d"])(D,t,n),e("SET_LOADING",!1)}catch(r){e("SET_LOADING",!1),e("SET_ERROR",r.message)}},async logOut(){await Object(w["e"])(D)},stateChanged({commit:e},t){t?e("SET_USER",t.uid):e("UNSET_USER")}}},U={getters:{getLoading(e){return e.loading},getError(e){return e.error},isAsideOpen(e){return e.isAsideOpen}},state:{loading:!1,error:null,isAsideOpen:!1},mutations:{TOGGLE_ASIDE(e){e.isAsideOpen=!e.isAsideOpen},SET_LOADING(e,t){e.loading=t},SET_ERROR(e,t){e.error=t},CLEAR_ERROR(e){e.error=null}}},$=n("66ce"),P={getters:{getCategoryList(e){return e.categoryList},getCategory(e){return e.category}},state:{categoryList:[],category:{}},mutations:{UPDATE_CATEGORY_LIST(e,t){e.categoryList=t},UPDATE_CATEGORY(e,t){e.category=t}},actions:{async updateCategory({getters:e,commit:t},n){try{const t=Object($["c"])(),r=e.userId,a={};return a[`${r}/categories/${n.id}`]=n,await Object($["f"])(Object($["d"])(t),a)}catch(r){throw t("SET_ERROR",r),r}},async getCategory({getters:e,commit:t},n){t("SET_LOADING",!0);const r=Object($["d"])(Object($["c"])()),a=e.userId;await Object($["b"])(Object($["a"])(r,`${a}/categories/${n}`)).then(e=>{if(e.exists()){const n=e.val();t("UPDATE_CATEGORY",n),t("SET_LOADING",!1)}else t("UPDATE_CATEGORY",{}),t("SET_LOADING",!1)}).catch(e=>{console.error(e)})},async getCategoryList({getters:e,commit:t}){t("SET_LOADING",!0);const n=Object($["d"])(Object($["c"])()),r=e.userId;await Object($["b"])(Object($["a"])(n,r+"/categories")).then(e=>{if(e.exists()){const n=e.val(),r=Object.keys(n).map(e=>({...n[e],id:e}));t("UPDATE_CATEGORY_LIST",r),t("SET_LOADING",!1)}else t("UPDATE_CATEGORY_LIST",[]),t("SET_LOADING",!1)}).catch(e=>{console.error(e)})},async saveCategory({getters:e,commit:t,dispatch:n},r){t("SET_LOADING",!0);const a=Object($["c"])(),s=e.userId,c=Date.now();r.id=c,await Object($["e"])(Object($["d"])(a,`${s}/categories/${c}`),r),n("getCategoryList"),t("SET_LOADING",!1)}}},x={getters:{getLinkList(e){return e.linkList}},state:{linkList:[]},mutations:{UPDATE_LINK_LIST(e,t){e.linkList=t}},actions:{async getLinkList({getters:e,commit:t},n){t("SET_LOADING",!0);const r=Object($["d"])(Object($["c"])()),a=e.userId;await Object($["b"])(Object($["a"])(r,`${a}/categories/${n}/links`)).then(e=>{if(e.exists()){const n=e.val(),r=Object.keys(n).map(e=>({...n[e],id:e}));t("UPDATE_LINK_LIST",r),t("SET_LOADING",!1)}else t("UPDATE_LINK_LIST",[]),t("SET_LOADING",!1)}).catch(e=>{console.error(e)})}}},B=Object(C["a"])({modules:{user:G,general:U,categories:P,links:x}});const M=[{path:"/",name:"home",component:()=>n.e("chunk-83462736").then(n.bind(null,"f4a9"))},{path:"/links-page/:id",name:"links-page",component:()=>n.e("chunk-d0ef0002").then(n.bind(null,"2db8"))},{path:"/profile-page",name:"profile-page",component:()=>n.e("chunk-2d0a32ea").then(n.bind(null,"00a5"))},{path:"/login",name:"login",component:()=>n.e("chunk-38bab7bb").then(n.bind(null,"48ca"))},{path:"/register",name:"register",component:()=>n.e("chunk-3a671566").then(n.bind(null,"61e9"))},{path:"/404",name:"404",component:()=>n.e("chunk-01807728").then(n.bind(null,"0c8b"))},{path:"/:pathMatch(.*)*",component:()=>n.e("chunk-01807728").then(n.bind(null,"0c8b"))}],Y=Object(S["a"])({history:Object(S["b"])("/links/"),routes:M});Y.beforeEach((e,t,n)=>{document.body.scrollTop=0,document.documentElement.scrollTop=0,window.pageYOffset=0,B.dispatch("initAuth").then(t=>{e.matched.some(e=>e.meta.authRequired)?t?n():n("/login"):n()})});var q=Y;n("2fc4");Object(r["c"])(L).use(B).use(q).mount("#app")},"5a53":function(e,t,n){},"7f22":function(e,t,n){},"83e0":function(e,t,n){},9431:function(e,t,n){},"99c6":function(e,t,n){"use strict";n("9431")},b5fd:function(e,t,n){},be7a:function(e,t,n){"use strict";var r=n("7a23");const a=e=>(Object(r["u"])("data-v-ba35c05e"),e=e(),Object(r["s"])(),e),s={class:"app-categories"},c=a(()=>Object(r["f"])("h2",{class:"title"}," Caterories ",-1)),o=a(()=>Object(r["f"])("input",{type:"submit",value:"Save",class:"submit"},null,-1)),i={key:0,class:"loading"},u={class:"category-list"},l=["onClick"];function d(e,t,n,a,d,p){return Object(r["r"])(),Object(r["e"])("div",s,[c,Object(r["f"])("form",{class:"input-block",onSubmit:t[1]||(t[1]=Object(r["G"])((...e)=>p.saveCategory&&p.saveCategory(...e),["prevent"]))},[Object(r["F"])(Object(r["f"])("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>d.categoryName=e),type:"text",placeholder:"add new category..",required:""},null,512),[[r["C"],d.categoryName]]),o],32),p.loading?(Object(r["r"])(),Object(r["e"])("p",i,"Загрузка...")):Object(r["d"])("",!0),Object(r["f"])("ul",u,[(Object(r["r"])(!0),Object(r["e"])(r["a"],null,Object(r["x"])(p.categoryList,e=>(Object(r["r"])(),Object(r["e"])("li",{key:e.id,class:"category-item",onClick:t=>p.showCategory(e)},Object(r["A"])(e.name),9,l))),128))])])}var p={name:"AppAside",data(){return{categoryName:""}},computed:{loading(){return this.$store.getters.getLoading},categoryList(){return this.$store.getters.getCategoryList},isAsideOpen(){return this.$store.getters.isAsideOpen},getCategoryList(){return this.$store.getters.getCategoryList}},methods:{showCategory(e){this.$store.commit("UPDATE_CATEGORY",e),this.$router.push({name:"links-page",params:{id:e.id}})},async saveCategory(){await this.$store.dispatch("saveCategory",{name:this.categoryName}),this.categoryName=""}},async mounted(){this.getCategoryList.length||await this.$store.dispatch("getCategoryList")}},b=(n("f443"),n("6b0d")),h=n.n(b);const g=h()(p,[["render",d],["__scopeId","data-v-ba35c05e"]]);t["a"]=g},e49b:function(e,t,n){"use strict";n("5a53")},f443:function(e,t,n){"use strict";n("7f22")}});
//# sourceMappingURL=app.5beb9661.js.map